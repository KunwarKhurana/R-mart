<!DOCTYPE html>
<html>
<head>
  <title>Pickles – R-Mart</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<header class="main-header">
    <div class="container header-flex">
        <div class="logo">
    		<a href="index.html">
        		<img src="RRVVKK LOGOOOOO.png" alt="R-Mart Logo">
    		</a>
   			<span>R-Mart</span>
		</div>

    <nav class="nav">
      <a href="index.html">Home</a>
      <a href="pickles.html">Pickles</a>
      <a href="comforter.html">Comforters</a>
      <a href="gulkand.html">Gulkand</a>
      <a href="rosewater.html">Rose Water</a>
      <a href="turmeric.html">Turmeric</a>
      <a href="saffron.html">Saffron</a>
    </nav>
  </div>
</header>


<section class="category-hero">
  <div class="category-hero-content">
    <h1 class="category-title animate-words">Pickles</h1>
    <p class="category-subtitle">
      Traditional flavours crafted with care
    </p>
  </div>
</section>

<!-- PRODUCTS GRID -->
<section class="products container">
  <div class="product-grid" id="productGrid"></div>
</section>

<div id="footer-placeholder"></div>
<script src="script.js"></script>

<script src="products.js"></script>

<script>
  const grid = document.getElementById("productGrid");

  function slugify(name) {
    return name.toLowerCase().replace(/[^a-z0-9]+/g, "-");
  }

  products
    .filter(p => p.category === "pickles")
    .forEach((p, index) => {

      const firstVariant = p.variants[0];
      const slug = slugify(p.name);

      grid.innerHTML += `
        <div class="product-card"
             onclick="openProduct('${slug}')"
             style="cursor:pointer;">

          <div class="product-image ${p.images?.length ? '' : 'empty'}">
                ${
                    p.images?.[0]
                    ? `<img 
                    src="${p.images[0]}" 
                    alt="${p.name}" 
                    loading="lazy">`
                    : `<span>Image coming soon</span>`
                }
            </div>

          <h3>${p.name}</h3>
          <p class="brand">${p.brand}</p>
          <p class="description">${p.description}</p>

          <select onclick="event.stopPropagation()"
                  onchange="updatePrice(${index}, this)">
            ${p.variants.map(v =>
              `<option value="${v.price}">${v.label} – ₹${v.price}</option>`
            ).join("")}
          </select>

          <p class="price" id="price-${index}">
            ₹${firstVariant.price}
          </p>

          <button onclick="
            event.stopPropagation();
            addVariantToCart(
              '${p.name}',
              '${firstVariant.label}',
              ${firstVariant.price}
            )">
            Add to Cart
          </button>

        </div>
      `;
    });

  function updatePrice(index, select) {
    document.getElementById(`price-${index}`).innerText =
      "₹" + select.value;
  }

  function addVariantToCart(name, variant, price) {
    addToCart(`${name} (${variant})`, price);
  }

  function openProduct(slug) {
    window.location.href = `product.html?slug=${slug}`;
  }
</script>



</body>
</html>
